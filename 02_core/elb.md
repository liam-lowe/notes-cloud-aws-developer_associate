# ELB - Elastic Load Balancer

## Summary

Load balancers are servers that forward traffic to one of many downstream servers.

- Load balancers spread load across multiple downstream instances
- Load balancers expose a single point of access (DNS) to your application
- Seamlessly handle failures of downstream instances
- Do regular healthchecks to your instances
- Provide SSL termination (HTTPS) for your websites
- Enforces stickiness with cookies
- High availability across zones
- Separate public traffic from private
- You can set up internal or external ELBs

An ELB (Elastic Load Balancer) is an AWS Managed Load Balancer.

- AWS guarantess that it will be working
- AWS takes care of upgrades, maintenance, high availability
- AWS provides only a few configuration knobs

It costs less to setup your own load balancer, but it will take a lot more effort.

It is integrated with many AWS offerings / services.

Load Balancers have a static host name, they d not resolve and use underlying IP.

LBs can scale, but not instantaneously.

4xx are client induced errors.

5xx errors are application induced errors. Load balancer 503 indicates LB is at capacity or no registered target.

If the LB can't connect to your application, check your security.

### Summary - Types of Load Balancers

- Classic Load Balancer (v1 - older generation)
- Application Load Balancer (v2 - new generation)
- Network Load Balancer (v2 - new generation)

#### Summary - Types of Load Balancers - Application Load Balancer

Application Load Balancers (ALB) are Layer 7 load balancers. ALBS allow:

- Load balancing to multiple HTTP applications across machines (target groups)
- Load balancing to multiple applications on the same machine (containers)
- Load balancing based on a route in the URL
- Load balancing based on hostname in URL
- Port mapping to redirect to a dynamic port
- HTTP / HTTPS / Websocket protocols
- Stickiness at a target group level. Same request goes to the same instance. Stickiness is generated by the ALB.

The application servers don't see the IP of the client directly:

- The true IP is located in the `X-Forwarded-For` header.
- The true Port is located in the `X-Forwarded-Port` header.
- The true Protocol is located in the `X-Forwarded-Proto` header.

#### Summary - Types of Load Balancers - Network Load Balancer

Network Load Balancers are a Layer 4 load balancer. It allows:

- Forwarding if TCP traffic to your instances
- Millions of requests per second
- Support for static IP or elastic IP
- Less latency ~100 ms (vs 400ms for ALB)
- Directly see the client IP

NLBs are generally used for extreme performance and should not be the default load balancer you choose.

### Summary - Health Checks

Health checks are crcuial for load balancers, they enable the load balancer to know if instances that the LB forwards traffic to are available for request.

The health check is done on a port and route (`\health` is common).

If the response is not an HTTP 200 OK, then the instance is deemed unhealthy

## Security

## Use Case

## Cost
